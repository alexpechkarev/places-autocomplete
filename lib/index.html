<!doctype html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="./index.css" rel="stylesheet">
    <script type="module">
        //import { PlacesAutocompleteJs } from './PlacesAutocompleteJs.js';
        import { PlacesAutocompleteJs } from '.././dist/places-autocomplete-js.js';


        document.addEventListener('DOMContentLoaded', () => {

            try {
                const myPac = new PlacesAutocompleteJs({
                    containerId: 'my-pac-container',
                    googleMapsApiKey: 'YOUR_GOOGLE_MAPS_KEY', // Replace with your Google Maps API key
                    onResponse: (placeDetails) => {
                        console.log('Place selected from module:', placeDetails);
                        let rspContainer = document.getElementById('response-container');
                        rspContainer.classList.remove('hidden');
                        rspContainer.classList.add('block');
                        let responseMessage = document.getElementById('response-message');
                        responseMessage.innerHTML = `
                                        <div class="mt-2 text-sm text-green-700">
                                            <p>${JSON.stringify(placeDetails)}</p>
                                        </div>`;
                        let errorContainer = document.getElementById('error-container');
                        errorContainer.classList.remove('block');
                        errorContainer.classList.add('hidden');
                    },
                    onError: (error) => {
                        console.error('Error from module:', error.message);
                        let errorContainer = document.getElementById('error-container');
                        errorContainer.classList.remove('hidden');
                        errorContainer.classList.add('block');
                        let errorMessage = document.getElementById('error-message');
                        errorMessage.innerHTML = `
                                        <div class="mt-2 text-sm text-red-700">
                                            <p>${error.message}</p>
                                        </div>`;

                    },
                    options: { // Optional: Override default options
                        placeholder: 'Start typing your address...',
                        debounce: 200,

                        classes: { // Override specific classes
                            input:
                                "border-1 w-full rounded-md border-0 shadow-sm bg-gray-100 px-4 py-2.5 pl-10 pr-20 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 sm:text-sm",

                        }
                    },
                    requestParams: { // Optional: Override default request parameters
                        input: '', // The user's input text. Will be updated dynamically.
                        includedRegionCodes: ['GB'], // Restrict search to Great Britain.
                        language: 'en-gb', // Preferred language for results.
                        region: 'GB', // Region biasing (GB).
                    }
                });

                const btnClear = document.getElementById('btnClear');
                const btnDestroy = document.getElementById('btnDestroy');
                btnClear.addEventListener('click', () => {
                    myPac.clear();
                });
                btnDestroy.addEventListener('click', () => {
                    myPac.destroy();
                });


            } catch (error) {
                console.error("Failed to initialize PAC:", error.message);
                console.error("Error details:", error);
            }
        });
    </script>
</head>

<body>

    <div class="p-10">


        <div class="rounded-md bg-red-50 p-4 hidden" id="error-container">
            <div class="flex">
                <div class="shrink-0">
                    <svg class="size-5 text-red-400" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"
                        data-slot="icon">
                        <path fill-rule="evenodd"
                            d="M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16ZM8.28 7.22a.75.75 0 0 0-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 1 0 1.06 1.06L10 11.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L11.06 10l1.72-1.72a.75.75 0 0 0-1.06-1.06L10 8.94 8.28 7.22Z"
                            clip-rule="evenodd" />
                    </svg>
                </div>
                <div class="ml-3">
                    <h3 class="text-sm font-medium text-red-800">Response Error</h3>
                    <div class="mt-2 text-sm text-red-700 font-semibold" id="error-message">

                    </div>
                </div>
            </div>
        </div>






        <div id="my-pac-container"></div>


        <div id="my-pac-container-two"></div>

        <div class="flex items-center mt-10 gap-10">
            <div>
                <button id="btnClear">Clear</button>
            </div>
            <div>
                <button id="btnDestroy">Destroy</button>
            </div>
        </div>


        <div class="rounded-md bg-green-50 p-4 hidden" id="response-container">
            <div class="flex">
                <div class="shrink-0">
                    <svg class="size-5 text-green-400" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"
                        data-slot="icon">
                        <path fill-rule="evenodd"
                            d="M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16Zm3.857-9.809a.75.75 0 0 0-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 1 0-1.06 1.061l2.5 2.5a.75.75 0 0 0 1.137-.089l4-5.5Z"
                            clip-rule="evenodd" />
                    </svg>
                </div>
                <div class="ml-3">
                    <h3 class="text-sm font-medium text-green-800">Response</h3>
                    <div class="mt-2 text-sm text-green-700">
                        <p id="response-message"></p>
                    </div>

                </div>
            </div>
        </div>
    </div>



</body>

</html>